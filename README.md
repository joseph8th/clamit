ClamIt
======

Simple commandline utility script to make the industrial-strength [ClamAV](http://clamav.net) antivirus software for mailservers easier to use from a Linux LiveCD or USB drive. Intended for Windows OS virus removal.

Basic Installation
------------------

**Note to Windows users**: don't copy or type the `$` character below. That represents a user prompt.

1) Boot the target computer to a Linux LiveCD (or better yet, Ubuntu-based persisent USB). 

2) Install `git`, clone `clamit` from GitHub *into a hidden `~/.clamit` directory*:

    $ git clone https://github.com/joseph8th/clamit ~/.clamit
    
3) Make the shell script executable:

    $ cd ~/.clamit; chmod +x clamit

4) Install the `clamit` command into your `PATH` (so you don't have to be in the `~/.clamit` directory to run it):

    $ ./clamit install cmd

5) You can use `clamit` to install `clamav` if you use either the `aptitude` (Debian, Ubuntu, etc.) or `pacman` (Arch)
package managers (otherwise install `clamav` using your package manager, or from source):

    $ clamit install clam [-a | -p]

Advanced Installation
---------------------

Update `clamit` from the repository using:

    $ clamit install update
    
Install four useful `*.desktop` launchers to the current user's `Desktop` folder, if it exists. NOTE: this feature requires `gnome-terminal` to work, for now.

    $ clamit install launch
    
Usage
-----

    $ ./clamit {
                install { clam [-a | -p], cmd, launch, update }
                fresh
                mount [-u]
                scan [device | tree]
                clean [logfile] 
                }

Commands
--------

    -h, --help		    print a help screen
    install {
             clam [-a | -p]     install `clamav` antivirus using `aptitude` or `pacman`
             cmd                install the `clamit` command to make life easier
             launch             install desktops launchers to make life studip (thaz a typo)
             update             update `clamit` from the repository
             }
    fresh                       update `clamav` virus databases (`freshclam`)
    mount [-u]                  `mount` or `unmount` one device and all its partitions; a convenience
    scan [device | tree]        `mount` AND scan given device or file tree. DEFAULT: interactive
    clean [logfile]             process the log file generated by `scan`. DEFAULT: interactive

Tips for Windows Users
----------------------

I wrote this script for my employer: an oldschool, hardcore Windows man from whom I have learned a great deal. In essence, this lil app is for Windows techs who need some Clorox when Windex ain't doing the trick.

* You will have to figure out how to do the following things by yourself: (a) make a Linux LiveCD/USB, and (b) open a terminal (`cmd.exe` on steroids). After that you can just use the installation instructions.

* When you use the `scan` command, `clamit` will list all the available drives, and ask which *device* you want to use in *Linux* format, `/dev/sdX`. NOTE: if you boot from USB, your boot device will be listed. (If you doubt which device to scan, you can quit with `^-C`. Then, run `lsblk` to see a tree of block devices and partitions.)

* To be safe, `clamit` mounts all primary partitions of the chosen device in a single tree under `/mnt/clamit` and asks `clamav` to recursively scan one drive at a time. It stores the `clamav` log file for later processing.

* Then `clean` processes this log and asks if you want to remove, quarantine, or ignore each infected file. If you quarantine a file, ClamIt moves the infected files into a `clam-quarantine` directory in `/mnt/clamit` on the **scanning** machine's filesystem (i.e., **not** in 'C:\clam-quarantine'). If you want to restore the file, you will have to do so manually. NOTE this means if you booted from a LiveCD the quarantine will be deleted on reboot.
